# 正则表达式

## 基本知识点
```c 

1. regex : regular expression
2. \< 表示词首, 如：\<abc 表示以 abc 为首的詞
3. \> 表示词尾, 如：abc\> 表示以 abc 結尾的詞。

```
## 基本匹配

```c 

   如果都是由具体的字符组成,那么就是全匹配(逐个进行字符比较)
   正则表达式是大小写匹配的.

```

## 元字符

正则表达式主要依赖于元字符.  
元字符不代表他们本身的字面意思, 他们都有特殊的含义. 

|元字符|描述|
|:----:|----|
|.|句号匹配任意一个字符除了换行符.|
|[ ]|字符种类. 匹配方括号内的任意字符.|
|[^ ]|否定的字符种类. 匹配除了方括号里的任意字符|
|*|匹配>=0个重复的在*号之前的字符.|
|+|匹配>=1个重复的+号前的字符.
|?|标记?之前的字符为可选.|
|{n,m}|匹配num个中括号之前的字符 (n <= num <= m).|
|(xyz)|字符集, 匹配与 xyz 完全相等的字符串.|
|&#124;|或运算符,匹配符号前或后的字符.|
|&#92;|转义字符,用于匹配一些保留的字符 <code>[ ] ( ) { } . * + ? ^ $ \ &#124;</code>|
|^|从开始行开始匹配.|
|$|从末端开始匹配.|


## 2.1 点运算符 `.`

`.`匹配任意一个字符, 但不匹配换行符.
例如, 表达式`.ar`匹配一个任意字符后面跟着是 `ar` 的字符串.


[在线练习](https://regex101.com/r/xc9GkU/1)

## 2.2 字符集

字符集也叫做字符类.
方括号用来指定 一个 字符的集合.
在方括号中使用连字符 `-` 来指定字符集的范围.
在方括号中的字符集不关心顺序.
例如, 表达式`[Tt]he` 匹配 `the` 和 `The`.

方括号的句号就表示句号.
表达式 `ar[.]` 匹配 `ar.`字符串

如果要在 "A garage is a good place to par- a car. ar," 字符串中匹配
"ara", "ar-", "ar,"
正则表达式为: ar[,\-,a-z]    --->(第一个逗号是匹配字符, 第二个逗号是分隔用的)

[在线练习](https://regex101.com/r/2ITLQ4/1)

### 2.2.1 否定字符集

一般来说 `^` 表示一个字符串的开头, 但它用在一个方括号里的开头的时候, 它表示这个字符集是否定的.
例如, 表达式`[^c]ar` 匹配一个后面跟着`ar`的除了`c`的任意字符.

除了方括号里的字符集其他都可以,只要在方括号里面第一个字符加`^` 就行了 
ar[^,\-]   除了  "ar-", "ar," 其他都匹配

[在线练习](https://regex101.com/r/nNNlq3/1)

## 2.3 重复次数

后面跟着元字符 `+`, `*` 或则 `?` 的, 用来指定匹配子模式的次数. 
这些元字符在不同的情况下有着不同的意思.

### 2.3.1 `*` 号, 贪心匹配符合条件尽可能多的

`*`号匹配 在`*`之前的字符出现`大于等于0`次.
例如, 表达式 `a*` 匹配以0或更多个a开头的字符
      表达式`[a-z]*` 匹配一个行中所有连续的小写字母的字符串.

[在线练习](https://regex101.com/r/7m8me5/1)

`*`字符和`.`字符搭配可以匹配所有的字符`.*`.
`*`和表示匹配空格的符号`\s`连起来用, 如表达式`\s*cat\s*`匹配0或更多个空格(或则回车或则Tab)开头
    和0或更多个空格(或则回车或则Tab)结尾的cat字符串.

[在线练习](https://regex101.com/r/gGrwuz/1)

### 2.3.2 `+` 号, 贪心匹配符合条件尽可能多的

`+`号匹配`+`号之前的字符出现 >=1 次个字符.
例如表达式`c.+t` 匹配以首字母`c`开头以`t`结尾,中间跟着至少一个的任意字符的字符串.

[在线练习](https://regex101.com/r/Dzf9Aa/1)

### 2.3.3 `?` 号, 非贪婪匹配（也就是尽可能少匹配）

在正则表达式中元字符 `?` 标记在符号前面的字符为出现 0 或 1 次.
例如, 表达式 `[T]?he` 匹配字符串 `he` 和 `The`.

>>> re.match(r'^(\d+?)(0*)$', '102300').groups()
('1023', '00')

[在线练习](https://regex101.com/r/kPpO2x/1)

## 2.4 `{}` 号, 贪心匹配符合条件尽可能多的

在正则表达式中 `{}` 是一个量词, 常用来一个或一组字符可以重复出现的次数.
例如,  表达式 `[0-9]{2,3}` 匹配 至少2位至多3位的0~9数字.
例如"1221123 34"  得到的结果为: 
 第一种: 122 第二种:112 第三种: 34   

[在线练习](https://regex101.com/r/juM86s/1)

我们可以省略第二个参数.
例如, `[0-9]{2,}` 匹配至少两位 0~9 的数字.
例如"1221123 34"  得到的结果为: 
 第一种: 1221123 第二种: 34  
 
 
如果逗号也省略掉则表示重复固定的次数. 
例如, `[0-9]{3}` 匹配3位数字
例如"1221123 34"  得到的结果为: 
 第一种: 122  第二种: 112  

[在线练习](https://regex101.com/r/Gdy4w5/1)

## 2.5 `(...)` 字符串集群

表达式 `(ab)*` 匹配连续出现 0 或更多个 `ab`.

我们还可以在 `()` 中用或字符 `|` 表示或. 例如, `(c|g|p)ar` 匹配 `car` 或 `gar` 或 `par`.

[在线练习](https://regex101.com/r/tUxrBG/1)

## 2.6 `|` 或运算符

或运算符就表示或, 用作判断条件.

例如 `(T|t)he|car` 匹配 `(T|t)he` 或 `car`.

The car is parked in the garage.
匹配结果:
第一种: The 第二种: car 第三个: the
[在线练习](https://regex101.com/r/fBXyX0/1)

## 2.7 匹配特殊字符

反斜线 `\` 在表达式中用于转码紧跟其后的字符. 用于指定 `{ } [ ] / \ + * . $ ^ | ?` 这些特殊字符. 
如果想要匹配这些特殊字符则要在其前面加上反斜线 `\`.

"(f|c|m)at\.?"  对于 "." 可有可无(因为元字符 ? )
例如: The fat cat sat on the mat.

匹配结果:
第一种: fat 第二种: cat 第三个: mat.(贪心匹配,匹配的越多越好)
[在线练习](https://regex101.com/r/DOc5Nu/1)

## 2.8 锚点

在正则表达式中, 想要匹配指定开头或结尾的字符串就要使用到锚点. `^` 指定开头, `$` 指定结尾.

### 2.8.1 `^` 号

`^` 用来检查匹配的字符串是否在所匹配字符串的开头.

The car is parked in the garage.  (这是完整的一串字符串,包含空格)

1.正则表达式: "(T|t)he" 
匹配结果:
    第一种: The 第二种: the
   
2.正则表达式: "^(T|t)he" 
  匹配结果:
      第一种: The 


### 2.8.2 `$` 号

同理于 `^` 号, `$` 号用来匹配字符是否是最后一个.

The fat cat. sat. on the mat.  (这是完整的一串字符串,包含空格)

1.正则表达式: "(at\.)" 
匹配结果:
    第一种: "cat." 第二种: "sat." 第三种: "mat." 
   
2.正则表达式: "(at\.)$" 
  匹配结果:
      第一种: "mat." 

##  3. 简写字符集

正则表达式提供一些常用的字符集简写. 如下:

|简写|描述|
|:----:|----|
|  .   | 除换行符外的所有字符                          |
|  \w  | 匹配所有字母数字, 等同于 [a-zA-Z0-9_]         |
|  \W  |匹配所有非字母数字, 即符号, 等同于: [^\w]       |
|  \d  |匹配数字:  [0-9]                             |
|  \D  |匹配非数字: [^\d]                            |
|  \s  |匹配所有空格字符, 等同于: [\t\n\f\r\p{Z}]      |
|  \S  |匹配所有非空格字符: [^\s]                     |

## 4. 约束条件,匹配该附加条件,但不打印该条件

例子: The fat cat sat on the mat.

1. 在目的结果后面加上附加条件(匹配附加条件) ?=

正则表达式: "[T|t]he(?=\sfat)"
匹配结果: "The"   因为(?=\sfat) 是附加匹配结果不显示,  
要达到的结果是 匹配出 The 或则 the 它满足的条件是 [T|t]he 后面必须是空格加fat(" fat")

2. 在目的结果后面加上附加条件(不匹配附加条件) ?!

正则表达式: "[T|t]he(?!\sfat)"
匹配结果: "the"   因为(?!\sfat) 是附加匹配结果不显示,  
要达到的结果是 匹配出 The 或则 the 它满足的条件是 [T|t]he 后面不是空格加fat(" fat")

3. 在目的结果前面加上附加条件(匹配附加条件) ?<=

正则表达式: "(?<=[T|t]he\s)(fat|mat)"
匹配结果: "fat" 和 "mat"  因为(?<=[T|t]he\s) 是附加匹配结果不显示,  
要达到的结果是 匹配出 fat 或则 mat 它满足的条件是 (fat|mat) 前面是[T|t]he\s

4. 在目的结果前面加上附加条件(匹配附加条件) ?<!

正则表达式: "(?<!the\s)(fat|mat)"
匹配结果: "fat"  因为(?<!the\s) 是附加匹配结果不显示,  
要达到的结果是 匹配出 fat 或则 mat 它满足的条件是 (fat|mat) 前面不是the\s


## 5. 标志

标志也叫修饰语, 因为它可以用来修改表达式的搜索结果.
这些标志可以任意的组合使用, 它也是整个正则表达式的一部分.

|标志|描述|
|:----:|----|
|i|忽略大小写.|
|g|全局搜索.|
|m|多行的: 锚点元字符 `^` `$` 工作范围在每行的起始.|

使用方法: /匹配字/gim  注意有2个"/"

### 5.1 忽略大小写 (Case Insensitive)

修饰语 `i` 用于忽略大小写.

例子: The fat cat sat on the mat.THE THe
正则表达式: /The/gi
匹配的结果:
第一种:The 第二种:the 第三种:THE 第四种:THe
注意一定要加g,要不然只会匹配第一个就结束了


### 5.2 全局搜索 (Global search)

修饰符 `g` 常用语执行一个全局搜索匹配, 即(不仅仅返回第一个匹配的, 而是返回全部). 
例如, 表达式 `/.(at)/g` 表示搜索 任意字符(除了换行) + `at`, 并返回全部结果.

例子: The fat cat sat on the mat.

正则表达式: "/.(at)/"
匹配的结果:
第一种:fat

正则表达式: "/.(at)/g"
匹配的结果:
第一种:fat 第二种:cat 第三种:sat 第四种:mat


### 5.3 多行修饰符 (Multiline)

多行修饰符 `m` 常用于执行一个多行匹配. 

像之前介绍的 `(^,$)` 用于检查格式是否是在待检测字符串的开头或结尾. 但我们如果想要它在每行的开头和结尾生效, 我们需要用到多行修饰符 `m`.

例如, 表达式 `/at(.)?$/gm` 表示在待检测字符串每行的末尾搜索 `at`后跟一个或多个 `.` 的字符串, 并返回全部结果.

例子:

The fat
cat sat
on the mat.

正则表达式: "/.at(.)?$/" (把这三行当做是一个字符串)
匹配的结果:
第一种: mat.

正则表达式: "/.at(.)?$/gm" (把这三行当做是三个字符串)
匹配的结果:
第一种: fat
第二种: sat
第三种: mat.